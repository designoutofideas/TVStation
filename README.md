# TVStation — 24hr Archive.org Broadcast System

## Files
```
tvstation/
├── index.html       ← The TV (TVStation.mydomain.org)
├── admin.html       ← Playlist Curator (admin.mydomain.org or /admin)
├── schedule.json    ← Your 24hr schedule (generated by admin)
└── README.md
```

## Quick Start

1. Drop all files onto your web server / hosting at `TVStation.mydomain.org`
2. Open `admin.html` to curate your schedule
3. Search Archive.org, add items to genre blocks, set start times
4. Click **EXPORT SCHEDULE.JSON** and save it to the same directory
5. Open `index.html` — you're on the air

---

## How Scheduling Works

The player reads `schedule.json` at page load (and refreshes every 30 min).
It calculates what should be playing RIGHT NOW based on the wall clock,
seeks the video to the correct offset, and auto-advances through the playlist.

### Genre Blocks
Each block has a **start time** (e.g. `19:00` for Prime Time). Items within
a block play back-to-back starting from that time. If a block runs over into
the next block's start time, items are queued after the overlap.

### schedule.json format
```json
{
  "version": 1,
  "blocks": [
    {
      "id": "b1",
      "name": "Morning",
      "genre": "morning",
      "startTime": "06:00",
      "items": [
        {
          "title": "My Film Title",
          "identifier": "archive_org_identifier",
          "filename": "optional_specific_file.mp4",
          "url": "https://direct-url-overrides-identifier",
          "duration": 5400,
          "scheduledStart": "06:00"
        }
      ]
    }
  ]
}
```

### Finding identifiers
The Archive.org identifier is the last part of any archive.org URL:
`https://archive.org/details/IDENTIFIER_HERE`

---

## Deployment Tips

### Static Hosting (Netlify, Vercel, GitHub Pages)
- Upload all 3 files. Works out of the box.
- For `schedule.json` updates: re-upload the file. The player auto-reloads every 30 min.

### Nginx / Apache
```nginx
server {
    server_name TVStation.mydomain.org;
    root /var/www/tvstation;
    index index.html;

    # Allow CORS for schedule.json if served from subdomain
    add_header Access-Control-Allow-Origin *;

    location / { try_files $uri $uri/ =404; }
}
```

### CORS Note
Archive.org supports CORS for media files. The Archive.org search API also
supports cross-origin requests. No proxy needed.

### Autoplay
Modern browsers block autoplay with sound. The player handles this by showing
a "Click to Tune In" overlay if autoplay is blocked.

---

## Admin Panel Features

- **Live Archive.org search** — searches by keyword, media type, and collection
- **Genre blocks** — create as many blocks as you want with custom start times
- **Drag-to-reorder** items within each block
- **Duration picker** — set h/m/s for each item
- **Import/Export** — full schedule.json round-trip
- **Running total** — see how many hours you have scheduled

---

## Customization

### Change the station name
In `index.html`, find:
```html
<div class="station-id">TVStation</div>
```

### Add a custom logo
Replace the text in `.station-id` with an `<img>` tag.

### Custom colors
Edit the CSS variables at the top of `index.html`:
```css
:root {
  --amber: #ffb700;     /* primary HUD color */
  --red: #ff3b1f;       /* LIVE indicator */
  --bg: #0a0a0a;        /* background */
}
```
